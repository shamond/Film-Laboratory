#:import utils kivy.utils
#:import Factory kivy.factory.Factory
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import fonts kivymd.font_definitions.fonts
#:import MDDataTable kivymd.uix.datatables


WindowManager:
    LoginScreen:
    MainScreen:
    CreateAccScreen:
    Latest:
    Cart:

<MyTile@SmartTileWithStar>
    size_hint_x : None
    size_hint_y: None
    width: "250dp"
    height: "350dp"
    radius: [20,]


<MainScreen>:
    name: "main_screen"
    Screen:
        MDNavigationLayout:
            ScreenManager:
                Screen:
                    MDFloatLayout:
                        MDLabel:
                            text: "TOP 5:"
                            pos_hint : {"center_x": 0.03 , "center_y" : 0.53}
                            font : 20
                            bold : True
                            halign : "center"
                        MDSwitch:
                            pos_hint : {"top" : .88 , "right" : .9}
                            on_active:  app.on_switch_active(*args)
                            width: "60dp"
                        FitImage:
                            source: "napis.png"
                            pos_hint: {"center_x" : 0.5 , "center_y" : 0.7}


                        MDToolbar:
                            id: toolbar
                            title: "MENU"
                            left_action_items: [['menu', lambda x: nav_drawer.set_state('toggle')]]
                            right_action_items: [["navigation", lambda y: right_nav_drawer.set_state('toggle')]]
                            pos_hint: {"right" : 1, "top": 1 }


                        ScrollView:
                            pos_hint: {"top":0.5}
                            size_hint_y: .5
                            do_scroll_y:False
                            do_scroll_x:True
                            MDGridLayout:
                                row_force_default: True
                                row_default_height: "350dp"
                                cols: 5
                                adaptive_width: True
                                adaptive_height: True
                                padding: dp(10), dp(10)
                                spacing: dp(10)
                                MyTile:
                                    id: dom_gucci
                                    title:
                                    stars: 5
                                    source: "dom gucci.jpg"
                                    MDIconButton:
                                        icon: "cart-plus"
                                        pos_hint:{"top": 1, "right": 1}
                                    MDFlatButton:
                                        size_hint : 1,1
                                        #text : "description"
                                        pos_hint: { "top": 1, "center_x": 0.5}
                                        on_press: Factory.Description_Dom_Gucci().open()
                                MyTile:

                                    id: dziewczyny_z_dubaju
                                    stars: 5
                                    source: "dziewczyny z dubaju.jpg"
                                    MDIconButton:
                                        icon: "cart-plus"
                                        pos_hint:{"top": 1, "right": 1}
                                    MDFlatButton:
                                        size_hint: 1,1
                                        #text : "description"
                                        pos_hint: { "top": 1, "center_x": 0.5}
                                        on_press: Factory.Description_dziewczyny_z_dubaju().open()
                                MyTile:
                                    id: resident_evil
                                    stars: 5
                                    source: "resident evil.jpg"
                                    MDIconButton:
                                        icon: "cart-plus"
                                        pos_hint:{"top": 1, "right": 1}
                                    MDFlatButton:
                                        size_hint: 1,1
                                        #text : "description"
                                        pos_hint: { "top": 1, "center_x": 0.5}
                                        on_press: Factory.Description_resident_evil().open()
                                MyTile:
                                    id: dune
                                    stars: 5
                                    source: "dune.jpg"
                                    MDIconButton:
                                        icon: "cart-plus"
                                        pos_hint:{"top": 1, "right": 1}
                                    MDFlatButton:
                                        size_hint: 1,1
                                        #text : "descritpion"
                                        pos_hint: { "top": 1, "center_x": 0.5}
                                        on_press: Factory.Description_dune().open()
                                MyTile:

                                    id: "eternals"
                                    stars: 5
                                    source: "eternals.jpg"
                                    MDIconButton:
                                        icon: "cart-plus"
                                        pos_hint:{"top": 1, "right": 1}
                                    MDFlatButton:
                                        size_hint : 1,1
                                        #text : "descritpion"
                                        pos_hint: { "top": 1, "center_x": 0.5}
                                        on_press: Factory.Description_eternals().open()

                        MDNavigationDrawer:
                            id: right_nav_drawer
                            ScrollView:
                                MDList:
                                    OneLineListItem:
                                        text: "Latest"
                                        on_press:
                                            app.root.transition = FallOutTransition(duration=.5)
                                            app.root.current = "latest"
                                    OneLineListItem:
                                        text: "Most Popular"


                        MDNavigationDrawer:
                            id: nav_drawer
                            MDBoxLayout:
                                spacing: "8dp"
                                orientation: "vertical"
                                padding : "8dp"
                                Image:
                                    source: "beztla.png"
                                    size: 300,300

                                ScrollView:
                                    MDList:
                                        OneLineIconListItem:
                                            text: "cart"
                                            on_press: app.root.current = "Cart"
                                            IconLeftWidget:
                                                icon: "cart"

                                        OneLineIconListItem:
                                            text: "Shared with me"
                                            IconLeftWidget:
                                                icon: "account-multiple"
                                        OneLineIconListItem:
                                            text: "favorite"
                                            IconLeftWidget:
                                                icon: "movie-open-star"
                                        OneLineIconListItem:
                                            text: "Recent"
                                            IconLeftWidget:
                                                icon: "history"
                                        OneLineIconListItem:
                                            text: "Upload"
                                            on_press: app.file_manager_open()
                                            IconLeftWidget:
                                                icon: "upload"


<CreateAccScreen>
    name: "create_screen"
    MDFloatLayout:
        MDTextField:
            id: create_email
            font_size: 20
            icon_left: "message"
            hint_text: "Your Email"
            helper_text_mode: "on_focus"
            pos_hint: { "center_x": .5, "center_y" : .6}
            size_hint: .4,.15
            multiline: False
        MDTextField:
            id: create_username
            font_size: 20
            hint_text: "Username"
            icon_left: "account"
            helper_text_mode: "on_focus"
            pos_hint: { "center_x": .5, "center_y" : .8}
            size_hint: .4,.15
            multiline: False
        MDTextField:
            id: create_password
            font_size: 20
            hint_text: "Your password"
            helper_text_mode: "on_focus"
            icon_left: "eye-off"
            pos_hint: { "center_x": .5, "center_y" : .4}
            size_hint: .4,.15
            multiline: False
            password: True
        MDFillRoundFlatButton:
            size_hint: .1,.05
            pos_hint : {"center_x" : 0.4, "center_y" : 0.15}
            text: "Create"
            on_press:
                app.root.current = "login_screen" if root.create() else Factory.InvalidCreate().open() and root.clear()
                #app.root.transition = FallOutTransition(duration=.5)
                #app.root.current = "login_screen"

    MDFillRoundFlatButton:
        size_hint: .1,.05
        pos_hint : {"center_x" : 0.5, "top" : 1}
        text: "Back"
        on_release: app.root.current = "login_screen"


    MDFillRoundFlatButton:
        size_hint: .1,.05
        pos_hint : {"center_x" : 0.6, "center_y" : 0.15}
        text: "Clear"
        on_press: root.clear()


<LoginScreen>:
    name: "login_screen"
    textinput: password

    MDFloatLayout:

        size: root.size
        Image:
            orientation: "horizontal"
            source : "logo.jpg"
            allow_stretch: True
            keep_ratio: False
            size: self.texture_size
        MDTextFieldRound:
            id: password
            size_hint: .17 , .05
            icon_left: "eye"
            pos_hint: {"center_x" : 0.45 , "center_y" : 0.35 }
            multiline: False
            hint_text: "password"
            password : True
            normal_color: app.theme_cls.accent_color
        MDTextFieldRound:
            id: email
            size_hint: .17,.05
            icon_left: "account"
            pos_hint: {"center_x" : 0.45 , "center_y" : 0.5 }
            multiline: False
            hint_text: "E-mail"
            helper_text: "Required"
            helper_text_mode: "on_error"
            required : True
            normal_color: app.theme_cls.accent_color
        MDFillRoundFlatButton:
            id : submit
            size_hint: .1,.05
            pos_hint : {"center_x" : 0.40, "center_y" : 0.29}
            text: "submit"
            on_press:
                app.root.transition = FallOutTransition(duration=.5)
                app.root.current = "main_screen" if root.login() else Factory.InvalidAccess().open()




        MDFillRoundFlatButton:
            size_hint: .1,.05
            pos_hint: {"center_x" : .51 , "center_y": 0.29}
            text: "cancel"
            on_release:
                Factory.cancelPopup().open()

        MDFillRoundFlatButton:
            pos_hint: { "right" : 1, "top": 1}
            text: "Create New Account"
            on_release:
                app.root.transition = FallOutTransition(duration=.5)
                app.root.current = "create_screen"

        MDFillRoundFlatButton:
            size_hint: .1,.05
            pos_hint: {"center_x" : 0.61 , "center_y" : 0.35 }
            text: "show/hide"
            on_press: root.visiblity()


<InvalidCreate@MDDialog>
    auto_dismiss: False
    size_hint: .6,.3
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    MDCard:
        Label:
            pos_hint:{"center_x": .5, "center_y":.5}
            text: "Invalid Email"
            font_size: 25
        MDFillRoundFlatButton:
            text: "ok"
            on_press:
                #app.root.transition = FallOutTransition(duration=.5)
                app.root.current = "login_screen"
                root.dismiss()


<Latest>:
    name: "latest"
    Screen:
        MDFloatLayout:
            MDLabel:
                pos_hint : {"center_x": 0.07 , "center_y" : 0.53}
                text: "latest cinema movies:"
                font : 20
                bold : True
                halign : "center"
            MDFillRoundFlatButton:
                text: "Go to Main Screen"
                pos_hint: {"top": .9 , "right": .9}
                on_press:
                    app.root.transition = FallOutTransition(duration=.5)
                    app.root.current = "main_screen"
            FitImage:
                source: "napis.png"
                pos_hint: {"center_x" : 0.5 , "center_y" : 0.7}
            ScrollView:
                pos_hint: {"top":0.5}
                size_hint_y: .5
                do_scroll_y:False
                do_scroll_x:True
                MDGridLayout:
                    row_force_default: True
                    row_default_height: "350dp"
                    cols: 5
                    adaptive_width: True
                    adaptive_height: True
                    padding: dp(10), dp(10)
                    spacing: dp(10)
                    MyTile:
                        stars: 5
                        source: "kogel_mogel.jpg"
                    MyTile:
                        stars: 5
                        source: "matrix.jpg"
                    MyTile:
                        stars: 5
                        source: "spiderman.jpg"
                    MyTile:
                        stars: 5
                        source: "rzeczy o ktorych nie wiecie.jpg"
                    MyTile:
                        stars: 5
                        source: "gierek.jpg"

<Cart>:
    name: "Cart"
    MDFlatButton:
        text: "OPEN TABLE"
        pos_hint: {"center_x": .5, "center_y": .5}
        on_release: root.open_table()
    MDFillRoundFlatButton:
        text: "Back"
        pos_hint: {"top": .5, "right": .9}
        on_release: app.root.current = "main_screen"


<InvalidAccess@MDDialog>
    auto_dismiss: False
    size_hint: .6 , .3
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    MDCard:
        Label:
            pos_hint : {"center_x": 0.5, "center_y": 0.5}
            text: "Invalid password or email"
        MDFillRoundFlatButton:
            text: "ok"
            on_release:
                app.root.current = "login_screen"
                root.dismiss()

<cancelPopup@Popup>
    auto_dismiss: False
    size_hint: 0.6, 0.6
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    title: "close?"

    FloatLayout:
        Label:
            pos_hint: { "center_x" : .5 , "center_y": .7}
            text: " do you agree to exit?"
            font_size: 20
        MDFillRoundFlatButton:
            pos_hint: { "center_x" : .35, "center_y": .2 }
            size_hint: .2,.15
            text: "ok"
            on_press: app.stop()

        MDFillRoundFlatButton:
            pos_hint: { "center_x": 0.6, "center_y": .2}
            size_hint: .2, .15
            text: "abort"
            on_press: root.dismiss()

<Description_Dom_Gucci@Popup>
    auto_dismiss: True
    size_hint: 0.6, 0.6
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    title: "House of Gucci"

    ScrollView:
        do_scroll_x : False
        do_scroll_y : True
        MDGridLayout:
            cols:1
            spacing : 10
            padding : 10,10
            adaptive_height: True
            MDLabel:
                size_hint_y: None
                height: self.texture_size[1]
                text: """In 1978, Patrizia Reggiani is a young, attractive Italian woman working as an office manager within her father's small trucking firm. At a party, Patrizia meets Maurizio Gucci, a law student and heir to a 50% interest in the Gucci fashion house through his father Rodolfo. Patrizia aggressively pursues the awkward Maurizio, charming him into love. Rodolfo warns Maurizio that Patrizia is only after wealth and tells Maurizio that he will disinherit him if he marries Patrizia; Maurizio chooses Patrizia over his connection to Gucci, leaving the family. Patrizia and Maurizio marry, and Maurizio takes a job at the Reggiani trucking company. When Patrizia becomes pregnant, she sees her child as an avenue for familial reconciliation. She lets it slip to Maurizio's uncle Aldo that she is pregnant; Aldo is delighted by the news and takes the couple under his wing. Aldo introduces Patrizia to his unintelligent son Paolo, who aspires to be a designer within Gucci despite his lack of talent. Thanks to Aldo, Maurizio and a terminally ill Rodolfo reconcile shortly before the latter's death. Rodolfo writes Maurizio back into his will, but fails to sign a document transferring the Gucci shares to him before he dies. Patrizia fakes Rodolfo's signature, giving Maurizio a 50% interest in Gucci.\nPatrizia starts to devise a plot to obtain a controlling interest in Gucci by acquiring some of Aldo and Paolo's shares (the two hold the other 50% interest). She clashes with Aldo over the firm's clandestine sale of cheap "fake" Gucci products on the black market, and begins to consult Giuseppina "Pina", a psychic, for guidance. She manipulates Maurizio, who has little real interest in Gucci, into taking a more active role within the company. Paolo acquires proof that Aldo has been evading taxes in the United States; he gives the proof to Patrizia in exchange for her promise that he will be allowed to design his own line. Aldo is arrested by the IRS and sentenced to a year and a day in prison. Patrizia lies to the Italian police and tells them that Paolo is not authorized to use the Gucci trademark; the police stop the fashion show by force. Patrizia and Maurizio ask Paolo to sell them his shares, but he rebuffs them and cuts ties between them.\nItalian police ransack Maurizio's house and attempt to arrest Maurizio for forging Rodolfo's signature. Maurizio and Patrizia flee to Switzerland, where Maurizio meets his old friend Paola Franchi. After an argument between Maurizio and Patrizia, Maurizio decides that he is tired of his wife's influence on himself and the company. He orders his wife and daughter to return to Italy and begins an affair with Paola, which Pina seemingly senses. When Maurizio's business plans harm the company, he seeks assistance from equity company Investcorp, through which he hatches a scheme to acquire shares of the company from a now-impoverished Paolo. Aldo returns from prison and immediately realizes what Paolo has done. When Investcorp offers to buy Aldo out, he refuses until Maurizio reveals himself as the deal's instigator. Dejected, Aldo sells the shares and cuts contact with Maurizio.\nPatrizia attempts a reconciliation with Maurizio, but he flatly ignores her. Later, he asks Patrizia for a divorce through his long-time assistant Domenico De Sole, which Patrizia refuses. Maurizio recruits up-and-coming designer Tom Ford to revitalize the company's image through a new line. Ford's products are successful, but Maurizio has so thoroughly mismanaged the company that Investcorp's leaders feel compelled to buy him out, replacing him with Ford and De Sole. Patrizia eventually grows so furious with Maurizio that she asks Pina to help her kill him. Pina puts Patrizia in contact with some hitmen "from Sicily." A few days later, the hit-men shoot Maurizio to death in broad daylight outside his residence.\nClosing intertitles describe the fate of the remaining characters. Aldo dies of prostate cancer and Paolo died in poverty shortly following the sale of their shares to Maurizio. Patrizia, Pina, and the hit-men are sentenced to long prison terms following their arrest for murder. Gucci is fully acquired by Investcorp and successfully managed into the present; no Gucci family members remain at the company.\n """

<Description_dziewczyny_z_dubaju@Popup>
    auto_dismiss: True
    size_hint: 0.6, 0.6
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    title: "Girls to buy"

    ScrollView:
        do_scroll_x : False
        do_scroll_y : True
        MDGridLayout:
            cols:1
            spacing : 10
            padding : 10,10
            adaptive_height: True
            MDLabel:
                size_hint_y : None
                height: self.texture_size[1]
                text: "A young ambitious girl is dreaming of a better life. When opportunity arises, she dives in without hesitation, becoming an exclusive high-end escort in the Middle East. Soon at the invitation of Arab sheiks, she begins to recruit Polish girls, celebrities, actresses and models.\n However, this inaccessible, luxurious world will soon show its dark side.\n Based on true stories, “Girls to buy” exposes the hypocrisy of the Polish show business and uncovers the truth behind the “Dubai scandal.” "




<Description_resident_evil@Popup>
    auto_dismiss: True
    size_hint: 0.6, 0.6
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    title: "Resident Evil"

    ScrollView:
        do_scroll_x : False
        do_scroll_y : True
        MDGridLayout:
            cols:1
            spacing : 10
            padding : 10,10
            adaptive_height: True
            MDLabel:
                size_hint_y: None
                height: self.texture_size[1]
                text: "The film opens with an introduction of the origins of the Umbrella Corporation which at the beginning of the 21st century is the world's biggest conglomerate entities while its political and economic influence is felt everywhere. But unbeknownst to the public, it hides a sinister and criminal secret that the megacorporation itself is involved in military technology, bioweaponry and genetic experimentation.\nUnderneath Raccoon City exists a genetic research facility called the Hive, owned by the Umbrella Corporation. A thief steals the genetically engineered T-virus and contaminates the Hive with it. In response, the facility's artificial intelligence, the Red Queen, seals the Hive and kills everyone inside.\nAlice awakens in the bathroom of a deserted mansion with temporary amnesia. She dresses, checks the mansion, and is tackled by an unknown person as a group of commandos led by James Shade breaks in. Alice's attacker is cuffed and then released when he claims to be Matt Addison, who just transferred as a cop in Raccoon P.D.. Alice and Matt are ordered to go down to the Hive with the group, where they find another amnesiac, Spence, hidden in their train. The commandos explain that everyone in the group except Matt is an employee of the Umbrella Corporation, and Alice and her partner Spence were assigned to guard the Hive's secret entrance under the mansion under the pretense of being married.\nAt the Red Queen's chamber, a laser defense system kills Shade and three more commandos. Despite the Red Queen's urgent pleas for the group to leave, Kaplan disables it, causing the power to fail and all of the doors in the Hive to open. This releases the zombified staff and containment units containing Lickers, creatures created through experimentation with the T-virus. The humans are attacked by the horde: J.D. dies; a bitten Rain retreats with Kaplan and Spence; and Matt becomes separated from Alice, who starts regaining her memories.\nMatt looks for information about his sister, Lisa, and finds her zombified. Alice saves him, and Matt explains he and Lisa were environmental activists, and Lisa infiltrated Umbrella to smuggle out the evidence of illegal experiments. Alice remembers she was Lisa's contact in the Hive but does not tell Matt. The survivors reunite at the Red Queen's chamber, where the commandos explain they have one hour before the Hive traps them inside automatically. Alice and Kaplan activate the Red Queen to find an exit. To force her cooperation, they rig a remote shutdown. As they escape through maintenance tunnels, zombies ambush them, and a reanimated J.D. bites Rain before she then shoots him dead. They all reach safety except Kaplan, who is bitten and separated from the group.\nAlice remembers that an anti-virus is in the lab, but they find it missing. Spence and Alice remember that Spence was the thief who stole and purposefully released the T-virus, and hid the T-virus and anti-virus on the train. Spence turns against the others but is bitten by a zombie, which he kills before trapping the survivors in the lab. Spence retrieves the anti-virus but is killed by a Licker set upon him by the Red Queen. The Red Queen offers to spare Alice and Matt if they kill Rain, who has been infected too long for the anti-virus to work reliably. As the Licker attempts to reach them, a power outage occurs. The lab door opens to reveal that Kaplan shut down the Red Queen to open the door. The group heads to the train, where Alice retrieves the anti-virus and kills a reanimated Spence before escaping with the others.\nOn the train, they inject Rain and Kaplan with the anti-virus. The Licker, having hidden on the train, attacks them, clawing Matt and killing Kaplan. Alice subdues the Licker before Matt is attacked by a zombified Rain, the anti-virus having failed to cure her. He shoots Rain dead, and her head hits a button, opening a door and dropping the Licker under the train, killing it. At the mansion, Matt's wound begins mutating. Before Alice can give him the anti-virus, the mansion doors burst open, and a group of Umbrella scientists seizes them. They subdue Alice and take Matt away, revealing he is to be put into the Nemesis Program, and that the Hive is to be re-opened for an investigation into the incident.\nSometime later, Alice awakens at the Raccoon City Hospital strapped to an examination table. She escapes outside to find Raccoon City deserted and in ruins. She retrieves a shotgun from an abandoned police car and continues through the streets "

<Description_dune@Popup>
    auto_dismiss: True
    size_hint: 0.6, 0.6
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    title: "Dune"

    ScrollView:
        do_scroll_x : False
        do_scroll_y : True
        MDGridLayout:
            cols:1
            spacing : 10
            padding : 10,10
            adaptive_height: True
            MDLabel:
                size_hint_y: None
                height: self.texture_size[1]
                text : """In the year 10191, when faster-than-light travel is possible, and almost all the planets in the known universe are colonized, Duke Leto of House Atreides, ruler of the ocean planet Caladan, is assigned by the Padishah Emperor Shaddam Corrino IV to replace House Harkonnen as fief rulers of Arrakis. Arrakis is a harsh desert planet and the only source of "spice", a valuable substance that bestows its users heightened vitality and expanded consciousness. It is critical for interstellar travel as it allows Spacing Guild Navigators to use a limited form of prescience to safely navigate interstellar space. In reality, Shaddam intends to have House Harkonnen stage a coup to retake the planet with aid of the Emperor's Sardaukar troops, eradicating House Atreides, whose influence threatens Shaddam's control. Leto is apprehensive but sees the political advantages of controlling the spice planet and forming an alliance with its native population, skilled fighters known as the Fremen.\nLeto's concubine Lady Jessica is an acolyte of the Bene Gesserit, an exclusive sisterhood whose members possess advanced physical and mental abilities. As part of their centuries-long breeding program, the Bene Gesserit instructed Jessica to bear a daughter whose son would become a male Bene Gesserit called the Kwisatz Haderach, a messianic superbeing with the clairvoyance necessary to guide humanity to a better future; instead she bore a son, Paul. Throughout his life, Paul is trained by Leto's aides, Duncan Idaho, Gurney Halleck, Suk doctor Wellington Yueh and the Mentat Thufir Hawat, while Jessica trains Paul in Bene Gesserit disciplines. Paul confides in Jessica and Duncan that he is troubled by visions of the future. Because of these visions, the Reverend Mother Gaius Helen Mohiam visits Caladan and subjects Paul to a deadly test to assess his impulse control, which he passes. Mohiam instructs House patriarch Baron Vladimir Harkonnen to spare Paul and Jessica during his coup, to which he duplicitously agrees.\nHouse Atreides arrives at Arrakeen, the fortress stronghold on Arrakis, where Duncan and an advance party have been learning about the planet and the Fremen. Leto negotiates with the Fremen's chieftain Stilgar and meets planetologist and imperial judge Dr. Liet-Kynes. Kynes informs Leto, Paul, and Halleck of the dangers of spice harvesting, including giant sandworms which travel under the desert. During a flight, they spot a sandworm approaching an active spice harvester with a stranded crew. Leto and his team rescue the workers moments before the sandworm swallows it. Paul's exposure to spice-laden air triggers intense premonitions.\nAfter an attempt on Paul's life by a Harkonnen agent, Leto places his soldiers on high alert. Yueh disables Arrakeen's shields and allows Harkonnen and Sardaukar troops to overwhelm the Atreides forces. Yueh incapacitates Leto and tells him he made a deal to deliver him to the Baron in exchange for freeing his captive wife. Yueh replaces one of Leto's teeth with a poison gas capsule and is killed after delivering the Duke. Leto releases the poison gas, killing himself and members of the Baron's court, but the Baron survives. Duncan escapes and steals an ornithopter. Harkonnens capture Paul and Jessica and take them into the desert to die. Paul and Jessica overpower and kill their captors using a Bene Gesserit skill known as "the Voice", a means of controlling others verbally. Finding a survival kit left for them by Yueh, Paul and Jessica spend the night in a tent. Paul experiences visions of a "holy war" spreading across the universe in his name.\nThe Baron hands over command of Arrakis to his brutish nephew Rabban and orders him to sell spice reserves and restart production to recover the cost of the coup. Paul and Jessica are found by Duncan and Kynes and head to an old research station but are quickly tracked by Sardaukar. Duncan and various Fremen sacrifice themselves to allow Jessica, Paul, and Kynes to escape the facility. Kynes separates and calls a sandworm to ride, but she is ambushed by Sardaukar troops and the worm devours them all. Paul and Jessica reach the deep desert and meet the Fremen, among them Stilgar and Chani, the girl in Paul's visions. Fremen warrior Jamis protests their admission and is killed by Paul in a ritual duel to the death. Against Jessica's wishes, Paul insists on joining the Fremen to fulfill his father's goal of bringing peace to Arrakis."""

<Description_eternals@Popup>
    auto_dismiss: True
    size_hint: 0.6, 0.6
    pos_hint : { "center_x" : 0.5, "center_y" : 0.5}
    title: "Eternals"

    ScrollView:
        do_scroll_x : False
        do_scroll_y : True
        MDGridLayout:
            cols:1
            spacing : 10
            padding : 10,10
            adaptive_height: True
            MDLabel:
                size_hint_y: None
                height: self.texture_size[1]
                text : """In 5000 BC, ten superpowered Eternals—Ajak, Sersi, Ikaris, Kingo, Sprite, Phastos, Makkari, Druig, Gilgamesh, and Thena—are sent by the Celestial Arishem to Earth on their starship, the Domo, to exterminate the invasive Deviants. The last of the Deviants are killed in 1521, and the group's opinions differ over their continued responsibilities and their relationship with humankind. Over the next five hundred years, they mostly live apart from each other, awaiting Arishem's return.\nIn the present day, Sersi and Sprite live together in London. After Sersi was left by her partner Ikaris centuries earlier, she is now in a relationship with human Dane Whitman, who works at the Natural History Museum. The trio is attacked by the Deviant Kro, with Ikaris arriving and chasing the creature away. Realizing the Deviants have returned, they travel to South Dakota to reunite with their leader, Ajak, only to find that she had been killed by Kro.\nSersi is posthumously chosen by Ajak as her successor, granting her the ability to communicate with Arishem, who reveals that the mission of the Eternals was not to fight the Deviants but to prepare Earth for the "Emergence". Arishem explains that for millions of years, the Celestials have been planting their seeds on populated planets for new Celestials to be born, with the Deviants sent by them to destroy the apex predators of each planet to ensure the development of intelligent life. However, when the Deviants evolved and began hunting the planets' native populations, the Celestials created the Eternals to cull them. With the reversal of the Blip,[N 1] Earth has reached the necessary population for the birth of the Celestial Tiamut, which will result in Earth's destruction.\nHaving learned to love humanity, the Eternals reassemble and decide to prevent the Emergence. They reconvene with Kingo, Thena, and Gilgamesh before heading to Druig's residence in the Amazon rainforest, where they are attacked by Kro and the Deviants. The group successfully kill most of them, only for Kro to kill Gilgamesh before fleeing. After cremating him, they visit Phastos, who proposes for Druig to put Tiamut to sleep by amplifying his mind-control powers with the Uni-Mind, a connection between all the Eternals. The team also finds Makkari, who has been living in the Domo. Ikaris reveals he was informed of the Emergence by Ajak centuries before and, choosing to remain loyal to Arishem, fed Ajak to the Deviants six days prior to prevent her from stopping it, before planting her body back at her house to feign ignorance. Sprite joins Ikaris as he flees due to her unrequited love for him, while Kingo also leaves the group as he does not wish to face Arishem or fight his teammates.\nMakkari locates the place of the Emergence at the foot of an active volcano in the Indian Ocean, and the Eternals battle Ikaris and Sprite before being attacked by Kro, who is then killed by Thena. Druig knocks out Sprite after she attempts to kill Sersi, and the remaining Eternals work together to subdue Ikaris while Phastos activates the Uni-Mind. Ikaris breaks free of his restraints and approaches Sersi to kill her, but finds himself unable to do so due to his love for her. As both he and Sprite join the Uni-Mind, Sersi gains enough power to turn Tiamut to marble. Guilt-ridden, Ikaris flies into the Sun, while at Sprite's request, Sersi uses the remaining energy from the Uni-Mind to turn Sprite into a human, ending her permanent childlike state.\nThena, Druig, and Makkari depart on the Domo to find other Eternals, while Sersi, Phastos, Kingo, and Sprite remain on Earth. Dane professes his love for Sersi and is about to reveal a secret about his family history when she, along with Phastos and Kingo, are remotely dragged into space by Arishem. Arishem states he is displeased with their treason, but elects to spare humanity if the Eternals' memories show that humans are worthy of living. Vowing to return for judgment, he disappears into a singularity, taking the trio with him.\nIn a mid-credits scene, Thena, Makkari, and Druig are visited by the Eternal Eros, Thanos' brother, and his assistant Pip the Troll, who offer their help. In a post-credits scene, Dane opens an old chest inherited from his ancestors that contains the legendary Ebony Blade when an unseen person questions him whether he is ready for it.  """






